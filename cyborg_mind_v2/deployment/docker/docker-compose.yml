version: '3.8'

services:
  cyborg_mind:
    build:
      context: ..
      dockerfile: cyborg_mind_v2/deployment/docker/Dockerfile
    runtime: nvidia
    deploy:
      resources:
        reservations:
          devices:
            - capabilities: [gpu]
    environment:
      - NVIDIA_VISIBLE_DEVICES=all
    ports:
      - "9090:9090"  # Expose Prometheus metrics
    command: ["python3", "-m", "cyborg_mind_v2.training.teacher_student_trainer_real"]